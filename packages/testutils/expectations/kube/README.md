<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# kube

```go
import "github.com/eclipse-symphony/symphony/packages/testutils/expectations/kube"
```

## Index

- [Variables](<#variables>)
- [func NewAnnotationMatchCondition\(annotation string, value string\) types.Condition](<#NewAnnotationMatchCondition>)
- [func NewKubernetesStatusCondition\(conditionType string, status bool\) types.Condition](<#NewKubernetesStatusCondition>)
- [func NewLabelMatchCondition\(label string, value string\) types.Condition](<#NewLabelMatchCondition>)
- [func ProvisioningStatusComponentOutput\(componentKey string, value interface\{\}\) types.Condition](<#ProvisioningStatusComponentOutput>)
- [type KubeExpectation](<#KubeExpectation>)
  - [func AbsentInstance\(name, namespace string, opts ...Option\) \(\*KubeExpectation, error\)](<#AbsentInstance>)
  - [func AbsentPod\(name, namespace string, opts ...Option\) \(\*KubeExpectation, error\)](<#AbsentPod>)
  - [func AbsentResource\(name, namespace string, gvk schema.GroupVersionKind, opts ...Option\) \(\*KubeExpectation, error\)](<#AbsentResource>)
  - [func AbsentSolution\(name, namespace string, opts ...Option\) \(\*KubeExpectation, error\)](<#AbsentSolution>)
  - [func AbsentTarget\(name, namespace string, opts ...Option\) \(\*KubeExpectation, error\)](<#AbsentTarget>)
  - [func Instance\(name, namespace string, opts ...Option\) \(\*KubeExpectation, error\)](<#Instance>)
  - [func Must\(resource \*KubeExpectation, err error\) \*KubeExpectation](<#Must>)
  - [func Pod\(name, namespace string, opts ...Option\) \(\*KubeExpectation, error\)](<#Pod>)
  - [func Resource\(pattern, namespace string, gvk schema.GroupVersionKind, opts ...Option\) \(\*KubeExpectation, error\)](<#Resource>)
  - [func Solution\(name, namespace string, opts ...Option\) \(\*KubeExpectation, error\)](<#Solution>)
  - [func Target\(name, namespace string, opts ...Option\) \(\*KubeExpectation, error\)](<#Target>)
  - [func \(e \*KubeExpectation\) AsGomegaSubject\(\) func\(context.Context\) \(interface\{\}, error\)](<#KubeExpectation.AsGomegaSubject>)
  - [func \(re \*KubeExpectation\) Description\(\) string](<#KubeExpectation.Description>)
  - [func \(re \*KubeExpectation\) Id\(\) string](<#KubeExpectation.Id>)
  - [func \(e \*KubeExpectation\) ToGomegaMatcher\(\) gomega.GomegaMatcher](<#KubeExpectation.ToGomegaMatcher>)
  - [func \(re \*KubeExpectation\) Verify\(c context.Context\) error](<#KubeExpectation.Verify>)
- [type Option](<#Option>)
  - [func IsAbsent\(\) Option](<#IsAbsent>)
  - [func WithCondition\(condition types.Condition\) Option](<#WithCondition>)
  - [func WithDescription\(description string\) Option](<#WithDescription>)
  - [func WithDiscoveryClientBuilder\(builder func\(\) \(discovery.DiscoveryInterface, error\)\) Option](<#WithDiscoveryClientBuilder>)
  - [func WithDynamicClientBuilder\(builder func\(\) \(dynamic.Interface, error\)\) Option](<#WithDynamicClientBuilder>)
  - [func WithListCondition\(condition types.Condition\) Option](<#WithListCondition>)
  - [func WithLogger\(logger func\(format string, args ...interface\{\}\)\) Option](<#WithLogger>)
  - [func WithTick\(tick time.Duration\) Option](<#WithTick>)


## Variables

<a name="PodReadyCondition"></a>

```go
var (
    PodReadyCondition types.Condition = conditions.All(
        NewKubernetesStatusCondition("Ready", true),
        NewKubernetesStatusCondition("Initialized", true),
        NewKubernetesStatusCondition("ContainersReady", true),
    )   // can be used for pods and certificates

    DeploymentCompleteCondition types.Condition = conditions.All(
        NewKubernetesStatusCondition("Available", true),
        NewKubernetesStatusCondition("Progressing", true),
    )   // can be used for deployments and statefulsets

    // AioManagerLabelCondition is a condition that checks if the resource is managed by the aio orc api
    AioManagerLabelCondition types.Condition = NewLabelMatchCondition("iotoperations.azure.com/managed-by", "symphony-api")

    // ProvisioningSucceededCondition is a condition that checks if the resource has succeeded provisioning
    ProvisioningSucceededCondition types.Condition = jq.Equality(".status.provisioningStatus.status", "Succeeded", statusDescription)

    // ProvisioningFailedCondition is a condition that checks if the resource has failed provisioning
    ProvisioningFailedCondition types.Condition = jq.Equality(".status.provisioningStatus.status", "Failed", statusDescription)
    // OperationIdMatchCondition is a condition that checks if the resource has the operation id  annotation and
    // ensures that it matches the operationId in the status of the resource
    OperationIdMatchCondition types.Condition = jq.MustNew(
        fmt.Sprintf(`.metadata.annotations["%s"]`, "management.azure.com/operationId"),
        jq.WithCustomMatcher(operationJqMatcher),
        jq.WithDescription("Operation Id"),
    )
)
```

<a name="NewAnnotationMatchCondition"></a>
## func [NewAnnotationMatchCondition](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/commons.go#L123>)

```go
func NewAnnotationMatchCondition(annotation string, value string) types.Condition
```

NewAnnotationMatchCondition returns a condition that checks if the resource has the annotation and value

<a name="NewKubernetesStatusCondition"></a>
## func [NewKubernetesStatusCondition](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/commons.go#L91>)

```go
func NewKubernetesStatusCondition(conditionType string, status bool) types.Condition
```

NewKubernetesStatusCondition returns a condition that checks the status of a kubernetes resource's condition

<a name="NewLabelMatchCondition"></a>
## func [NewLabelMatchCondition](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/commons.go#L104>)

```go
func NewLabelMatchCondition(label string, value string) types.Condition
```

NewLabelMatchCondition returns a condition that checks if the resource has the label and value

<a name="ProvisioningStatusComponentOutput"></a>
## func [ProvisioningStatusComponentOutput](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/commons.go#L112>)

```go
func ProvisioningStatusComponentOutput(componentKey string, value interface{}) types.Condition
```



<a name="KubeExpectation"></a>
## type [KubeExpectation](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/resource.go#L27-L61>)



```go
type KubeExpectation struct {
    // contains filtered or unexported fields
}
```

<a name="AbsentInstance"></a>
### func [AbsentInstance](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/commons.go#L157>)

```go
func AbsentInstance(name, namespace string, opts ...Option) (*KubeExpectation, error)
```

AbsentInstance returns an expectation that the instance\(s\) is/are absent from the cluster

<a name="AbsentPod"></a>
### func [AbsentPod](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/commons.go#L137>)

```go
func AbsentPod(name, namespace string, opts ...Option) (*KubeExpectation, error)
```

AbsentPod returns an expectation that the pod\(s\) is/are absent from the cluster

<a name="AbsentResource"></a>
### func [AbsentResource](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/commons.go#L117>)

```go
func AbsentResource(name, namespace string, gvk schema.GroupVersionKind, opts ...Option) (*KubeExpectation, error)
```

AbsentResource returns an expectation for the resources is/are absent from the cluster

<a name="AbsentSolution"></a>
### func [AbsentSolution](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/commons.go#L167>)

```go
func AbsentSolution(name, namespace string, opts ...Option) (*KubeExpectation, error)
```

AbsentSolution returns an expectation that the solution\(s\) is/are absent from the cluster

<a name="AbsentTarget"></a>
### func [AbsentTarget](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/commons.go#L147>)

```go
func AbsentTarget(name, namespace string, opts ...Option) (*KubeExpectation, error)
```

AbsentTarget returns an expectation that the target\(s\) is/are absent from the cluster

<a name="Instance"></a>
### func [Instance](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/commons.go#L152>)

```go
func Instance(name, namespace string, opts ...Option) (*KubeExpectation, error)
```

Instance returns an expectation for a instance\(s\) in the cluster

<a name="Must"></a>
### func [Must](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/commons.go#L172>)

```go
func Must(resource *KubeExpectation, err error) *KubeExpectation
```

Must returns a resource expectation or panics if there is an error

<a name="Pod"></a>
### func [Pod](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/commons.go#L132>)

```go
func Pod(name, namespace string, opts ...Option) (*KubeExpectation, error)
```

Pod returns an expectation expectation for a pod\(s\) in the cluster

<a name="Resource"></a>
### func [Resource](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/resource.go#L75>)

```go
func Resource(pattern, namespace string, gvk schema.GroupVersionKind, opts ...Option) (*KubeExpectation, error)
```



<a name="Solution"></a>
### func [Solution](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/commons.go#L162>)

```go
func Solution(name, namespace string, opts ...Option) (*KubeExpectation, error)
```

Solution returns an expectation for a solution\(s\) in the cluster

<a name="Target"></a>
### func [Target](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/commons.go#L142>)

```go
func Target(name, namespace string, opts ...Option) (*KubeExpectation, error)
```

Target returns an expectation for a target\(s\) in the cluster

<a name="KubeExpectation.AsGomegaSubject"></a>
### func \(\*KubeExpectation\) [AsGomegaSubject](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/gomega.go#L17>)

```go
func (e *KubeExpectation) AsGomegaSubject() func(context.Context) (interface{}, error)
```



<a name="KubeExpectation.Description"></a>
### func \(\*KubeExpectation\) [Description](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/resource.go#L161>)

```go
func (re *KubeExpectation) Description() string
```



<a name="KubeExpectation.Id"></a>
### func \(\*KubeExpectation\) [Id](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/resource.go#L168>)

```go
func (re *KubeExpectation) Id() string
```



<a name="KubeExpectation.ToGomegaMatcher"></a>
### func \(\*KubeExpectation\) [ToGomegaMatcher](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/gomega.go#L23>)

```go
func (e *KubeExpectation) ToGomegaMatcher() gomega.GomegaMatcher
```



<a name="KubeExpectation.Verify"></a>
### func \(\*KubeExpectation\) [Verify](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/resource.go#L145>)

```go
func (re *KubeExpectation) Verify(c context.Context) error
```

Verify implements types.Expectation.

<a name="Option"></a>
## type [Option](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/resource.go#L63>)



```go
type Option func(*KubeExpectation)
```

<a name="IsAbsent"></a>
### func [IsAbsent](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/options.go#L57>)

```go
func IsAbsent() Option
```



<a name="WithCondition"></a>
### func [WithCondition](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/options.go#L12>)

```go
func WithCondition(condition types.Condition) Option
```

WithCondition specifies the conditions that the resource should satisfy.

<a name="WithDescription"></a>
### func [WithDescription](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/options.go#L39>)

```go
func WithDescription(description string) Option
```



<a name="WithDiscoveryClientBuilder"></a>
### func [WithDiscoveryClientBuilder](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/options.go#L51>)

```go
func WithDiscoveryClientBuilder(builder func() (discovery.DiscoveryInterface, error)) Option
```



<a name="WithDynamicClientBuilder"></a>
### func [WithDynamicClientBuilder](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/options.go#L45>)

```go
func WithDynamicClientBuilder(builder func() (dynamic.Interface, error)) Option
```



<a name="WithListCondition"></a>
### func [WithListCondition](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/options.go#L19>)

```go
func WithListCondition(condition types.Condition) Option
```

WithListCondition specifies the conditions that the list of matched resources should satisfy.

<a name="WithLogger"></a>
### func [WithLogger](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/options.go#L26>)

```go
func WithLogger(logger func(format string, args ...interface{})) Option
```

WithLogger specifies the logger to be used.

<a name="WithTick"></a>
### func [WithTick](<https://github.com/eclipse-symphony/symphony/blob/main/packages/testutils/expectations/kube/options.go#L33>)

```go
func WithTick(tick time.Duration) Option
```

WithTick specifies the tick for the expectation.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
