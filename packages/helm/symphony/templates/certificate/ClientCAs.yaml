apiVersion: trust.cert-manager.io/v1alpha1
kind: Bundle
metadata:
  name: {{ include "symphony.apiClientCATrustBundle" . }}
  namespace: cert-manager
spec:
  sources:
  {{- if .Values.Cert.ClientCAs.SecretName}}
  - secret: 
      name: {{ .Values.Cert.ClientCAs.SecretName }}
      key: {{ .Values.Cert.ClientCAs.SecretKey }}
  {{- else }}
  - inLine: |
      -----BEGIN CERTIFICATE-----
      MIIDdjCCAl6gAwIBAgIRANM/Nv1Qzc7WFVPVZH4RVPgwDQYJKoZIhvcNAQELBQAw
      EzERMA8GA1UEChMIc3ltcGhvbnkwHhcNMjUwMzMxMDg0MTAwWhcNMjUwOTI3MDg0
      MTAwWjATMREwDwYDVQQKEwhzeW1waG9ueTCCASIwDQYJKoZIhvcNAQEBBQADggEP
      ADCCAQoCggEBAL65XE8+vozMagWvE1hL+Qt5KSLNi3AUSHYVMiYy8jYULNNUom5x
      aosP4K9IWNtyHh9bCyLoHwm9VPTi/oVKNWi0qZueHypUO76hjO3o4ZFwoWjuvMFK
      /RNDqADQUOEtC1kmPBiWKruGhdOkZtf6shcWf7o4IP9yuwQChojT/eje1gqftkhB
      S8y9bqjBjKntfgRC2xTbc+yjK1b0R+GrDcyXdzIC3q6NNNS1GpFHQ0CFp7KN/gCw
      vrv/8qUZhu4zz+wjLFkETvLgbA+OP2TcleQJeP893FMxwD8t0lZZRfGhKIjWE9w+
      sMA/MrGH8PXBjyY55LWZtyQC/jWwGzbhWG0CAwEAAaOBxDCBwTAOBgNVHQ8BAf8E
      BAMCAqQwDwYDVR0TAQH/BAUwAwEB/zAdBgNVHQ4EFgQUV4rdnx9IlbxOAfDV92Rg
      cSM3HB8wfwYDVR0RBHgwdoIQc3ltcGhvbnktc2VydmljZYIYc3ltcGhvbnktc2Vy
      dmljZS5kZWZhdWx0ghxzeW1waG9ueS1zZXJ2aWNlLmRlZmF1bHQuc3ZjgipzeW1w
      aG9ueS1zZXJ2aWNlLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwwDQYJKoZIhvcN
      AQELBQADggEBAEToqnsx37em32bhPVPZcEsfULULXhs7rhOgKFIkRG07uJ1NdCiu
      YYh5LYI2iw9C6CBumTzcO303Ig/yjN4jrt1ZxTQ82l8Yc9PXFYNolb4qS5uUkNH2
      svKaL+G0h8BqrCtE5WEWOyuW97x+HVeFbSsCBHPX8pPALA68aSLqSUWi+iojNU7/
      +IyhoVruvwmsmg76LkG1zU22CGaJ9y/0ZhsywkLhpC+pjFcVwhGjZtYvb83EtRvE
      E9EF/N02J8ISvtaBsMf33FRc9aHDyu6Fx5RMKiK3orWkR55O33apZDfMdgms9KcT
      svQbm5jr6YqDRMFFMlJGojLG1O+BHl61ezk=
      -----END CERTIFICATE-----
  {{- end }}
  target:
    configMap:
      key: {{ include "symphony.apiClientCATrustBundleKey" . }}