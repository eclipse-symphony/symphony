apiVersion: workflow.symphony/v1
kind: CampaignContainer
metadata:
  name: create-campaign
---
apiVersion: workflow.symphony/v1
kind: Campaign
metadata:
  name: create-campaign-v-version1
spec:
  firstStage: stage1
  rootResource: create-campaign
  selfDriving: true
  stages:
    stage1:
      inputs:
        action: create
        object:
          metadata:
            name: create-instance1
          spec:
            solution: create-solution-v-version1
        objectName: create-instance1
        objectType: instance
      name: stage1
      provider: providers.stage.create
      stageSelector: stage2
      target: create-target
    stage2:
      inputs:
        action: create
        object:
          metadata:
            name: create-instance2
          spec:
            solution: create-solution-v-version2
        objectName: create-instance2
        objectType: instance
      name: stage2
      provider: providers.stage.create
      stageSelector: stage3
      target: create-target
    stage3:
      config:
        wait.count: 1
        wait.interval: 1
      inputs:
        action: create
        object:
          metadata:
            name: create-instance3
          spec:
            solution: create-solution-v-version2
        objectName: create-instance3
        objectType: instance
      name: stage3
      provider: providers.stage.create
      stageSelector: stage4
      target: create-target
    stage4:
      inputs:
        action: create
        object:
          metadata:
            name: create-instance4
          spec:
            solution: create-solution-v-nonexist
        objectName: create-instance4
        objectType: instance
      name: stage4
      provider: providers.stage.create
      target: create-target
  version: version1