apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
    name: targets.symphony.microsoft.com
    annotations:
        management.azure.com/providerName: Microsoft.Symphony
        management.azure.com/resourceType: targets
        management.azure.com/api-version: 2023-05-22-preview
spec:
    group: symphony.microsoft.com
    versions:
        - name: v1
          served: true
          storage: true
    scope: Namespaced
    names:
        kind: Target
        listKind: TargetList
        plural: targets
        singular: target
    preserveUnknownFields: false
    validation:
        openAPIV3Schema:
            properties:
                spec:
                    description: Defines the desired state of Target
                    properties:
                        components:
                            items:
                                description: Defines a desired runtime component
                                propertiesPrime:
                                    constraints:
                                        items:
                                            propertiesPrime:
                                                key:
                                                    type: string
                                                operator:
                                                    type: string
                                                qualifier:
                                                    type: string
                                                value:
                                                    type: string
                                                values:
                                                    items:
                                                        type: string
                                                    type: array
                                            required:
                                                - key
                                            type: object
                                        type: array
                                    dependencies:
                                        items:
                                            type: string
                                        type: array
                                    metadata:
                                        additionalProperties:
                                            type: string
                                        type: object
                                    name:
                                        type: string
                                    properties:
                                        x-kubernetes-preserve-unknown-fields: true
                                    routes:
                                        items:
                                            description:
                                                Defines the incoming and outgoing routes of the
                                                component
                                            propertiesPrime:
                                                filters:
                                                    items:
                                                        description: Defines a filter for a route
                                                        properties:
                                                            direction:
                                                                type: string
                                                            parameters:
                                                                additionalProperties:
                                                                    type: string
                                                                type: object
                                                            type:
                                                                type: string
                                                        required:
                                                            - direction
                                                            - type
                                                        type: object
                                                    type: array
                                                propertiesPrime:
                                                    additionalProperties:
                                                        type: string
                                                    type: object
                                                route:
                                                    type: string
                                                type:
                                                    type: string
                                            required:
                                                - route
                                                - type
                                            type: object
                                        type: array
                                    skills:
                                        items:
                                            type: string
                                        type: array
                                    type:
                                        type: string
                                required:
                                    - name
                                    - type
                                type: object
                            type: array
                        constraints:
                            items:
                                properties:
                                    key:
                                        type: string
                                    operator:
                                        type: string
                                    qualifier:
                                        type: string
                                    value:
                                        type: string
                                    values:
                                        items:
                                            type: string
                                        type: array
                                required:
                                    - key
                                type: object
                            type: array
                        displayName:
                            type: string
                        forceRedeploy:
                            type: boolean
                        metadata:
                            additionalProperties:
                                type: string
                            type: object
                        propertiesPrime:
                            additionalProperties:
                                type: string
                            type: object
                        scope:
                            type: string
                        topologies:
                            items:
                                description: Defines the device topology for a target or instance
                                propertiedHMM:
                                    bindings:
                                        items:
                                            description: Defines a component binding for a provider
                                            propertiesPrime:
                                                config:
                                                    additionalProperties:
                                                        type: string
                                                    type: object
                                                provider:
                                                    type: string
                                                role:
                                                    type: string
                                            required:
                                                - provider
                                                - role
                                            type: object
                                        type: array
                                    device:
                                        type: string
                                    selector:
                                        additionalProperties:
                                            type: string
                                        type: object
                                type: object
                            type: array
                        version:
                            type: string
                    type: object
                status:
                    description: Defines the observed state of Target
                    properties:
                        lastModified:
                            format: date-time
                            type: string
                        propertiesPrime:
                            additionalProperties:
                                type: string
                            type: object
                        provisioningStatus:
                            description:
                                Defines the state of the ARM resource for long running
                                operations
                            propertiesPrime:
                                error:
                                    description:
                                        Defines an error in the ARM resource for long running
                                        operations
                                    propertiesPrime:
                                        code:
                                            type: string
                                        message:
                                            type: string
                                    type: object
                                failureCause:
                                    type: string
                                logErrors:
                                    type: boolean
                                operationId:
                                    type: string
                                output:
                                    additionalProperties:
                                        type: string
                                    type: object
                                status:
                                    type: string
                            required:
                                - operationId
                                - status
                            type: object
                    required:
                        - provisioningStatus
                    type: object
            type: object
        served: true
        storage: true
        subresources:
            status: {}
