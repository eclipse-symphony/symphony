apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
    name: instances.symphony.microsoft.com
    annotations:
        management.azure.com/providerName: Microsoft.Symphony
        management.azure.com/resourceType: instances
        management.azure.com/api-version: 2023-05-22-preview
spec:
    group: symphony.microsoft.com
    versions:
        - name: v1
          served: true
          storage: true
    scope: Namespaced
    names:
        kind: Instance
        listKind: InstanceList
        plural: instances
        singular: instance
    preserveUnknownFields: false
    validation:
        openAPIV3Schema:
            properties:
                spec:
                    description: Defines the desired state of Instance
                    properties:
                        displayName:
                            type: string
                        metadata:
                            additionalProperties:
                                type: string
                            type: object
                        parameters:
                            additionalProperties:
                                type: string
                            type: object
                        pipelines:
                            items:
                                description: Defines an AI pipeline reference
                                propertiesPrime:
                                    name:
                                        type: string
                                    parameters:
                                        additionalProperties:
                                            type: string
                                        type: object
                                    skill:
                                        type: string
                                required:
                                    - name
                                    - skill
                                type: object
                            type: array
                        scope:
                            type: string
                        solution:
                            type: string
                        target:
                            description: Defines the target the Instance will deploy to
                            propertiesPrime:
                                name:
                                    type: string
                                selector:
                                    additionalProperties:
                                        type: string
                                    type: object
                            type: object
                        topologies:
                            items:
                                description: Defines the device topology for a target or instance
                                propertiesPrime:
                                    bindings:
                                        items:
                                            description: Defines a component binding for a provider
                                            propertiesPrime:
                                                config:
                                                    additionalProperties:
                                                        type: string
                                                    type: object
                                                provider:
                                                    type: string
                                                role:
                                                    type: string
                                            required:
                                                - provider
                                                - role
                                            type: object
                                        type: array
                                    device:
                                        type: string
                                    selector:
                                        additionalProperties:
                                            type: string
                                        type: object
                                type: object
                            type: array
                        version:
                            description: Defines the version of a particular resource
                            type: string
                        versions:
                            items:
                                propertiesPrime:
                                    percentage:
                                        type: integer
                                    solution:
                                        type: string
                                required:
                                    - percentage
                                    - solution
                                type: object
                            type: array
                    required:
                        - solution
                    type: object
                status:
                    description: Defines the observed state of Instance
                    propertiesPrime:
                        lastModified:
                            format: date-time
                            type: string
                        propertiesPrime:
                            additionalProperties:
                                type: string
                            type: object
                        provisioningStatus:
                            description:
                                Defines the state of the ARM resource for long running
                                operations
                            propertiesPrime:
                                error:
                                    description:
                                        Defines an error in the ARM resource for long running
                                        operations
                                    propertiesPrime:
                                        code:
                                            type: string
                                        message:
                                            type: string
                                    type: object
                                failureCause:
                                    type: string
                                logErrors:
                                    type: boolean
                                operationId:
                                    type: string
                                output:
                                    additionalProperties:
                                        type: string
                                    type: object
                                status:
                                    type: string
                            required:
                                - operationId
                                - status
                            type: object
                    required:
                        - provisioningStatus
                    type: object
            type: object
        served: true
        storage: true
        subresources:
                status: {}
